webpackJsonp([1],{MMRs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return{imageUrl:"",form:{username:"",picture:""}}},components:{},methods:{handleAvatarSuccess:function(e,t){console.log(e),this.imageUrl=this.$store.state.base_url+e.url,this.form.picture=e.url,this.$message.success({title:"上传成功",message:"图片上传成功"})},beforeAvatarUpload:function(e){var t="image/png"===e.type||"image/gif"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("请上传格式为image/png, image/gif, image/jpg, image/jpeg的图片"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},submitForm:function(){var e=this;e.form.username=e.$store.state.userinfo.username,e.$confirm("确定要换头像吗，亲？","换头像确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.put("/user/myself",e.form).then(function(t){"success"===t.data.flag?(e.$message({type:"success",message:"头像更新成功,会有缓存，可以刷新后查看"}),e.$router.push("/personal")):e.$message({type:"error",message:"上传失败"})})}).catch(function(){e.$message({type:"info",message:"取消换头像"})})},backMenu:function(){this.$router.push("/personal")}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("个人中心")]),e._v(" "),a("el-breadcrumb-item",[e._v("个人信息")]),e._v(" "),a("el-breadcrumb-item",[e._v("修改头像")])],1),e._v(" "),e._m(0),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:8000/api/upload_pic","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",staticStyle:{"border-radius":"100px"},attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:""!=e.imageUrl,expression:"imageUrl!=''? true:false"}],ref:"uploadform",staticClass:"uploadform",staticStyle:{"margin-top":"-100px"},attrs:{model:e.form,"label-width":"100px"}},[a("h6",[e._v("上传成功，点击图片仍然可以重新上传")]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"",prop:"url"}},[a("el-input",{model:{value:e.form.picture,callback:function(t){e.$set(e.form,"picture",t)},expression:"form.picture"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"-90px","margin-top":"-80px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){return e.backMenu()}}},[e._v("不换了，返回")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"el-icon-upload"}),this._v(" 要更新您的头像吗，亲？")])}]};var i=a("VU/8")(r,s,!1,function(e){a("yH8I")},"data-v-8955b2fe",null);t.default=i.exports},yH8I:function(e,t){}});
//# sourceMappingURL=1.33ff5455e9d158085048.js.map